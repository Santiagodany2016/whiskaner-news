<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Whiskaner News</title>
  <style>
    body { font-family: sans-serif; max-width: 800px; margin: auto; padding: 1rem; }
    h2 { border-bottom: 2px solid #ccc; margin-top: 2rem; }
    article { margin-bottom: 1rem; }
    a { color: #007bff; text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <h1>Whiskaner News</h1>
  <div id="news"></div>

  <script>
    const url = 'https://santiagodany2016.github.io/whiskaner-news/feed.json?t=' + Date.now();

    fetch(url)
      .then(res => res.json())
      .then(data => {
        const grouped = {};
        data.items.forEach(item => {
          if (!grouped[item.type]) grouped[item.type] = [];
          grouped[item.type].push(item);
        });

        const container = document.getElementById('news');
        for (const type in grouped) {
          const h2 = document.createElement('h2');
          h2.textContent = type.charAt(0).toUpperCase() + type.slice(1);
          container.appendChild(h2);

          grouped[type].forEach(n => {
            const art = document.createElement('article');
            art.innerHTML = `
              <a href="${n.url}" target="_blank"><strong>${n.title}</strong></a>
              <p>${n.summary || ''}</p>
              <small>${n.published_at ? new Date(n.published_at).toLocaleDateString() : ''}</small>
            `;
            container.appendChild(art);
          });
        }
      })
      .catch(err => {
        document.getElementById('news').textContent = 'Error al cargar las noticias.';
        console.error(err);
      });
  </script>
</body>
</html>
